<!DOCTYPE html>
<html lang="de">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0"
    />
    <title>Carbonify Demo Views</title>
    <style>
      :root {
        /* BaseProdWebsite brand palette */
        --cb-brand-50-color: 214deg 100% 97%;
        --cb-brand-100-color: 214deg 95% 93%;
        --cb-brand-200-color: 213deg 97% 87%;
        --cb-brand-300-color: 212deg 96% 78%;
        --cb-brand-400-color: 213deg 94% 68%;
        --cb-brand-500-color: 217deg 91% 60%;
        --cb-brand-700-color: 224deg 76% 48%;
        --cb-brand-800-color: 226deg 71% 40%;
        --cb-brand-900-color: 225deg 64% 33%;
        --cb-brand-950-color: 226deg 57% 21%;

        /* Mapped Carbonify variables */
        --brand: hsl(var(--cb-brand-500-color));
        --brand-dark: hsl(var(--cb-brand-700-color));
        --bg: #f8f9fa;
        --surface: #ffffff;
        --border: #e9ecef;
        --text: #212529;
        --muted: #2C75FF;
      }

      * {
        box-sizing: border-box;
      }
      body {
        margin: 0;
        font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
        background: var(--bg);
        color: var(--text);
      }
      header {
        background: var(--brand);
        color: #fff;
        padding: 1rem 1.5rem;
      }
      .bonus-toggle {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        margin-top: 0.5rem;
        font-size: 0.875rem;
      }
      .mobile-toggle {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        margin-top: 0.5rem;
        font-size: 0.875rem;
      }
      .toggle-switch {
        position: relative;
        width: 44px;
        height: 24px;
        background: rgba(255, 255, 255, 0.2);
        border-radius: 12px;
        cursor: pointer;
        transition: background 0.2s ease;
      }
      .toggle-switch.active {
        background: rgba(255, 255, 255, 0.8);
      }
      .toggle-switch::after {
        content: '';
        position: absolute;
        top: 2px;
        left: 2px;
        width: 20px;
        height: 20px;
        background: #fff;
        border-radius: 50%;
        transition: transform 0.2s ease;
      }
      .toggle-switch.active::after {
        transform: translateX(20px);
      }
      .container {
        max-width: 1200px;
        margin: 1rem auto;
        padding: 0 1rem;
      }
      .tabs {
        display: flex;
        gap: 0.5rem;
        background: #e9ecef;
        border-radius: 12px;
        padding: 0.25rem;
      }
      .tab-btn {
        border: 0;
        background: transparent;
        color: var(--muted);
        padding: 0.625rem 1rem;
        border-radius: 10px;
        font-weight: 600;
        cursor: pointer;
      }
      .tab-btn.active {
        background: var(--surface);
        color: var(--brand);
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
      }
      .view {
        margin-top: 1rem;
        background: var(--surface);
        border: 1px solid var(--border);
        border-radius: 12px;
        overflow: hidden;
        display: none;
      }
      .view.active {
        display: block;
      }

      /* Hero Section Styles */
      .hero-section {
        background: linear-gradient(135deg, var(--brand) 0%, var(--brand-dark) 100%);
        background-image: url('Hero-desktop-wide.webp');
        background-size: cover;
        background-position: center;
        background-blend-mode: overlay;
        position: relative;
        overflow: hidden;
        min-height: 60vh;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .hero-section::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(135deg, rgba(44, 117, 255, 0.9) 0%, rgba(32, 84, 184, 0.8) 100%);
        z-index: 1;
      }

      .hero-content {
        position: relative;
        z-index: 2;
        text-align: center;
        color: #ffffff;
        max-width: 800px;
        padding: 2rem;
        margin: 0 auto;
      }

      .hero-logo {
        font-size: 2.5rem;
        font-weight: 700;
        margin-bottom: 1rem;
        opacity: 0;
        animation: fadeInUp 0.8s ease-out 0.2s forwards;
      }

      .hero-title {
        font-size: 3.5rem;
        font-weight: 700;
        margin-bottom: 1rem;
        line-height: 1.2;
        opacity: 0;
        animation: fadeInUp 0.8s ease-out 0.4s forwards;
      }

      .hero-subtitle {
        font-size: 1.25rem;
        opacity: 0.9;
        margin-bottom: 2rem;
        opacity: 0;
        animation: fadeInUp 0.8s ease-out 0.6s forwards;
      }

      .hero-stats {
        display: flex;
        justify-content: center;
        gap: 3rem;
        margin-bottom: 2rem;
        opacity: 0;
        animation: fadeInUp 0.8s ease-out 0.8s forwards;
      }

      .stat-item {
        text-align: center;
      }

      .stat-number {
        font-size: 2.5rem;
        font-weight: 700;
        display: block;
        margin-bottom: 0.25rem;
      }

      .stat-label {
        font-size: 0.875rem;
        opacity: 0.8;
        text-transform: uppercase;
        letter-spacing: 0.05em;
      }

      .hero-cta {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        background: #ffffff;
        color: var(--brand);
        padding: 1rem 2rem;
        border-radius: 50px;
        font-weight: 600;
        font-size: 1.1rem;
        text-decoration: none;
        transition: all 0.3s ease;
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        opacity: 0;
        animation: fadeInUp 0.8s ease-out 1s forwards;
        position: relative;
        overflow: hidden;
      }

      .hero-cta::after {
        content: '';
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.3), transparent);
        transform: rotate(45deg) translateX(-100%);
        transition: transform 0.6s ease;
      }

      .hero-cta:hover::after {
        transform: rotate(45deg) translateX(100%);
      }

      .hero-cta:hover {
        transform: translateY(-3px);
        box-shadow: 0 12px 35px rgba(0, 0, 0, 0.25);
        background: var(--brand);
        color: #ffffff;
      }

      .floating-cards {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        pointer-events: none;
        z-index: 1;
      }

      .floating-card {
        position: absolute;
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.2);
        border-radius: 16px;
        padding: 1rem;
        color: #ffffff;
        font-size: 0.875rem;
        font-weight: 500;
        animation: float 6s ease-in-out infinite;
        pointer-events: auto;
      }

      .floating-card:nth-child(1) {
        top: 15%;
        left: 5%;
        animation-delay: 0s;
      }

      .floating-card:nth-child(2) {
        top: 25%;
        right: 8%;
        animation-delay: 2s;
      }

      .floating-card:nth-child(3) {
        bottom: 25%;
        left: 8%;
        animation-delay: 4s;
      }

      @keyframes fadeInUp {
        from {
          opacity: 0;
          transform: translateY(30px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      @keyframes float {
        0%,
        100% {
          transform: translateY(0px) rotate(0deg);
        }
        33% {
          transform: translateY(-20px) rotate(2deg);
        }
        66% {
          transform: translateY(-10px) rotate(-1deg);
        }
      }

      /* Interactive Elements */
      .interactive-element {
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .interactive-element:hover {
        transform: scale(1.05);
      }

      /* Toggle Options */
      .toggle-option {
        padding: 0.75rem 1.5rem;
        border: 2px solid #e2e8f0;
        background: white;
        color: #475569;
        border-radius: 12px;
        cursor: pointer;
        transition: all 0.3s ease;
        font-weight: 600;
        font-size: 0.875rem;
      }

      .toggle-option:hover {
        border-color: var(--brand);
        background: rgba(44, 117, 255, 0.1);
      }

      .toggle-option.active {
        border-color: var(--brand);
        background: var(--brand);
        color: white;
      }

      /* Vehicle Dropdown */
      .vehicle-dropdown {
        padding: 0.75rem 1rem;
        border: 2px solid #e2e8f0;
        border-radius: 12px;
        background: white;
        color: #475569;
        font-size: 0.875rem;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.3s ease;
        appearance: none;
        background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='m6 8 4 4 4-4'/%3e%3c/svg%3e");
        background-position: right 0.75rem center;
        background-repeat: no-repeat;
        background-size: 1.25em 1.25em;
        padding-right: 2.5rem;
        min-width: 200px;
      }

      .vehicle-dropdown:hover {
        border-color: var(--brand);
      }

      .vehicle-dropdown:focus {
        outline: none;
        border-color: var(--brand);
        box-shadow: 0 0 0 3px rgba(44, 117, 255, 0.1);
      }

      /* Priority Options */
      .priority-option {
        background: white;
        border: 2px solid #e2e8f0;
        border-radius: 16px;
        padding: 2rem;
        cursor: pointer;
        transition: all 0.3s ease;
        text-align: center;
      }

      .priority-option:hover {
        border-color: var(--brand);
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
      }

      .priority-option.selected {
        border-color: var(--brand);
        background: rgba(44, 117, 255, 0.1);
      }

      /* Year Chips */
      .year-chip {
        background: white;
        border: 2px solid #e2e8f0;
        border-radius: 50px;
        padding: 0.75rem 1.5rem;
        cursor: pointer;
        transition: all 0.3s ease;
        font-weight: 600;
        color: #475569;
        display: inline-block;
        margin: 0.25rem;
      }

      .year-chip:hover {
        border-color: var(--brand);
        background: #f8fafc;
        color: var(--brand);
      }

      .year-chip.selected {
        background: var(--brand);
        color: white;
        border-color: var(--brand);
      }

      /* Mobile Responsive */
      @media (max-width: 768px) {
        .hero-title {
          font-size: 2.5rem;
        }

        .hero-stats {
          flex-direction: column;
          gap: 1.5rem;
        }

        .stat-number {
          font-size: 2rem;
        }

        .floating-cards {
          display: none;
        }
      }

      /* Tablet adjustments */
      @media (max-width: 1024px) {
        .floating-card:nth-child(1) {
          top: 10%;
          left: 2%;
        }

        .floating-card:nth-child(2) {
          top: 20%;
          right: 5%;
        }

        .floating-card:nth-child(3) {
          bottom: 20%;
          left: 5%;
        }
      }
    </style>
  </head>
  <body>
    <header>
      <div class="container">
        <h1 style="margin: 0; font-size: 1.25rem">carbonify – View Showcase</h1>
        <div style="opacity: 0.9">Ein Basis-Layout mit allen Views</div>
        <div class="bonus-toggle">
          <span>Verivox Bonus anzeigen</span>
          <div
            class="toggle-switch"
            id="bonusToggle"
            title="Verivox Bonus ein-/ausschalten"
          ></div>
        </div>
        <div class="mobile-toggle">
          <span>Mobile Ansicht</span>
          <div
            class="toggle-switch"
            id="mobileToggle"
            title="Mobile Ansicht ein-/ausschalten"
          ></div>
        </div>
      </div>
    </header>

    <!-- Hero Section -->
    <div class="hero-section">
      <div class="floating-cards">
        <div class="floating-card interactive-element">
          <div>🚗</div>
          <div>THG-Prämie</div>
        </div>
        <div class="floating-card interactive-element">
          <div>💰</div>
          <div id="maxPriceDisplay">Bis zu €215</div>
        </div>
        <div class="floating-card interactive-element">
          <div>⚡</div>
          <div>Express verfügbar</div>
        </div>
      </div>

      <div class="hero-content">
        <div class="hero-logo"></div>
        <h1 class="hero-title">THG-Prämie sichern</h1>
        <p class="hero-subtitle">Maximieren Sie Ihre Auszahlung mit Deutschlands führendem THG-Prämien-Service</p>

        <div class="hero-stats">
          <div class="stat-item">
            <span class="stat-number" data-countup="true" data-start-val="0" data-end-val="250000" data-suffix="+" data-prefix="" data-duration="2.5" data-scroll-spy="true" data-scroll-spy-delay="0">0+</span>
            <span class="stat-label">Zufriedene Kunden</span>
          </div>
          <div class="stat-item">
            <span class="stat-number" id="maxPriceStat" data-countup="true" data-start-val="0" data-end-val="215" data-prefix="€" data-duration="2.0" data-scroll-spy="true" data-scroll-spy-delay="300">€0</span>
            <span class="stat-label">Max. Prämie</span>
          </div>
          <div class="stat-item">
            <span class="stat-number" data-countup="true" data-start-val="0" data-end-val="24" data-prefix="" data-suffix="h" data-duration="1.5" data-scroll-spy="true" data-scroll-spy-delay="600">0h</span>
            <span class="stat-label">Express Service</span>
          </div>
        </div>

        <a
          href="#views"
          class="hero-cta interactive-element"
        >
          <span>Wähle deine THG-Prämie</span>
          <svg
            width="20"
            height="20"
            viewBox="0 0 20 20"
            fill="currentColor"
          >
            <path
              fill-rule="evenodd"
              d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z"
              clip-rule="evenodd"
            />
          </svg>
        </a>
      </div>
    </div>

    <main
      class="container"
      id="views"
    >
      <div
        class="tabs"
        role="tablist"
      >
        <button
          class="tab-btn active"
          data-target="#comparison"
          role="tab"
        >
          Vergleich
        </button>
        <button
          class="tab-btn"
          data-target="#toggle"
          role="tab"
        >
          Toggle-Ansicht
        </button>
        <button
          class="tab-btn"
          data-target="#planfinder"
          role="tab"
        >
          Plan Finder
        </button>
        <button
          class="tab-btn"
          data-target="#figma"
          role="tab"
        >
          Regler-Ansicht
        </button>
        <button
          class="tab-btn"
          data-target="#figma-copy"
          role="tab"
        >
          Figma Copy
        </button>
      </div>

      <!-- Comparison View -->
      <section
        id="comparison"
        class="view active"
        role="tabpanel"
      >
        <div style="padding: 2rem;">
          <div style="background: #f8fafc; padding: 2rem; border-bottom: 1px solid #e2e8f0; margin-bottom: 2rem;">
            <div style="display: flex; gap: 2rem; align-items: center; flex-wrap: wrap; justify-content: center;">
              <div>
                <label style="display: block; margin-bottom: 0.5rem; font-weight: 600;">Zeitraum</label>
                <div style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
                  <button class="toggle-option" data-year="2025">2025</button>
                  <button class="toggle-option active" data-year="both">Beide Jahre</button>
                  <button class="toggle-option" data-year="2026">2026</button>
                </div>
              </div>
              <div>
                <label style="display: block; margin-bottom: 0.5rem; font-weight: 600;">Fahrzeugklasse</label>
                <select id="comparisonVehicleSelect" class="vehicle-dropdown">
                  <option value="M1">PKW (Klasse M1)</option>
                  <option value="M3">Busse (Klasse M3)</option>
                  <option value="N1">Leichtes Nutzfahrzeug (Klasse N1)</option>
                  <option value="N2">Schweres Nutzfahrzeug (Klasse N2)</option>
                  <option value="N3">Schweres Nutzfahrzeug (Klasse N3)</option>
                </select>
              </div>
            </div>
          </div>

          <div style="overflow-x: auto;">
            <table style="width: 100%; border-collapse: collapse;">
              <thead>
                <tr>
                  <th style="background: #f8fafc; padding: 2.5rem 1rem 1.5rem 1rem; text-align: center; font-weight: 700; color: #1e293b; border-bottom: 2px solid #e2e8f0; position: sticky; top: 0; z-index: 10;"></th>
                  <th style="background: #f8fafc; padding: 2.5rem 1rem 1.5rem 1rem; text-align: center; font-weight: 700; color: #1e293b; border-bottom: 2px solid #e2e8f0; position: sticky; top: 0; z-index: 10; position: relative;">
                    <div style="position: absolute; top: -8px; left: 50%; transform: translateX(-50%); background: #2C75FF; color: white; padding: 0.25rem 0.75rem; border-radius: 12px; font-size: 0.75rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; z-index: 20;">Empfohlen</div>
                    <h3 style="margin-bottom: 0.5rem;">Klassik</h3>
                    <p style="font-size: 0.875rem; font-weight: normal; color: #64748b;">
                      Etwas Wartezeit, höchste THG-Prämie
                    </p>
                  </th>
                  <th style="background: #f8fafc; padding: 2.5rem 1rem 1.5rem 1rem; text-align: center; font-weight: 700; color: #1e293b; border-bottom: 2px solid #e2e8f0; position: sticky; top: 0; z-index: 10;">
                    <h3 style="margin-bottom: 0.5rem;">Express</h3>
                    <p style="font-size: 0.875rem; font-weight: normal; color: #64748b;">
                      Die richtige Wahl für alle die es schnell wollen
                    </p>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td style="font-weight: 600; background: #f8fafc; padding: 1rem; text-align: center; border-bottom: 1px solid #f1f5f9;">Prämie</td>
                  <td style="padding: 1rem; text-align: center; border-bottom: 1px solid #f1f5f9;">
                    <div style="background: linear-gradient(135deg, #2C75FF, #00D4AA); border-radius: 16px; padding: 1.5rem; text-align: center; color: white; margin: 1.5rem 0; position: relative; overflow: hidden;">
                      <div style="font-size: 2.5rem; font-weight: 700; line-height: 1; margin-bottom: 0.5rem;" id="klassikComparisonPrice">€215</div>
                      <div style="font-size: 0.875rem; opacity: 0.9; margin-bottom: 1rem;" id="comparisonPeriod">Gesamtsumme 2025 & 2026</div>
                      <div style="background: rgba(255, 255, 255, 0.2); border-radius: 20px; padding: 0.5rem 1rem; font-size: 0.75rem; font-weight: 600; display: none;" id="klassikComparisonBonus" class="total-sum-bonus">+ 30€ Verivox-Bonus</div>
                    </div>
                  </td>
                  <td style="padding: 1rem; text-align: center; border-bottom: 1px solid #f1f5f9;">
                    <div style="background: linear-gradient(135deg, #2C75FF, #00D4AA); border-radius: 16px; padding: 1.5rem; text-align: center; color: white; margin: 1.5rem 0; position: relative; overflow: hidden;">
                      <div style="font-size: 2.5rem; font-weight: 700; line-height: 1; margin-bottom: 0.5rem;" id="expressComparisonPrice">€195</div>
                      <div style="font-size: 0.875rem; opacity: 0.9; margin-bottom: 1rem;" id="comparisonPeriod2">Gesamtsumme 2025 & 2026</div>
                      <div style="background: rgba(255, 255, 255, 0.2); border-radius: 20px; padding: 0.5rem 1rem; font-size: 0.75rem; font-weight: 600; display: none;" id="expressComparisonBonus" class="total-sum-bonus">+ 30€ Verivox-Bonus</div>
                    </div>
                  </td>
                </tr>
                <tr>
                  <td style="font-weight: 600; background: #f8fafc; padding: 1rem; text-align: center; border-bottom: 1px solid #f1f5f9;">Auszahlung</td>
                  <td style="padding: 1rem; text-align: center; border-bottom: 1px solid #f1f5f9;">Nach UBA-Zertifizierung</td>
                  <td style="padding: 1rem; text-align: center; border-bottom: 1px solid #f1f5f9;">Sofort nach Anmeldung</td>
                </tr>
                <tr>
                  <td style="font-weight: 600; background: #f8fafc; padding: 1rem; text-align: center; border-bottom: 1px solid #f1f5f9;">Wartezeit</td>
                  <td style="padding: 1rem; text-align: center; border-bottom: 1px solid #f1f5f9;">2-6 Monate</td>
                  <td style="padding: 1rem; text-align: center; border-bottom: 1px solid #f1f5f9;">Keine</td>
                </tr>
                <tr>
                  <td style="font-weight: 600; background: #f8fafc; padding: 1rem; text-align: center; border-bottom: 1px solid #f1f5f9;">Garantie</td>
                  <td style="padding: 1rem; text-align: center; border-bottom: 1px solid #f1f5f9;">Höchste Prämie garantiert</td>
                  <td style="padding: 1rem; text-align: center; border-bottom: 1px solid #f1f5f9;">Feste Auszahlung garantiert</td>
                </tr>
                <tr>
                  <td style="padding: 1rem; text-align: center; border-bottom: 1px solid #f1f5f9;"></td>
                  <td style="padding: 1rem; text-align: center; border-bottom: 1px solid #f1f5f9;">
                    <button style="background: #2C75FF; color: white; border: none; padding: 1rem 2rem; border-radius: 12px; font-weight: 600; font-size: 1rem; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; justify-content: center; gap: 0.5rem; width: 100%;" onclick="selectPlan('Klassik')">
                      Klassik jetzt beantragen
                      <svg style="width: 20px; height: 20px;" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z" clip-rule="evenodd"/>
                      </svg>
                    </button>
                  </td>
                  <td style="padding: 1rem; text-align: center; border-bottom: 1px solid #f1f5f9;">
                    <button style="background: #2C75FF; color: white; border: none; padding: 1rem 2rem; border-radius: 12px; font-weight: 600; font-size: 1rem; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; justify-content: center; gap: 0.5rem; width: 100%;" onclick="selectPlan('Express')">
                      Express jetzt beantragen
                      <svg style="width: 20px; height: 20px;" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z" clip-rule="evenodd"/>
                      </svg>
                    </button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </section>

      <!-- Toggle View -->
      <section
        id="toggle"
        class="view"
        role="tabpanel"
      >
        <div style="padding: 2rem;">
          <div style="background: #f8fafc; padding: 2rem; border-bottom: 1px solid #e2e8f0; margin-bottom: 2rem;">
            <div style="display: flex; gap: 2rem; align-items: center; flex-wrap: wrap; justify-content: center;">
              <div>
                <label style="display: block; margin-bottom: 0.5rem; font-weight: 600;">Plan-Typ</label>
                <div style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
                  <button class="toggle-option" data-plan="klassik">Klassik</button>
                  <button class="toggle-option active" data-plan="express">Express</button>
                </div>
              </div>
              <div>
                <label style="display: block; margin-bottom: 0.5rem; font-weight: 600;">Zeitraum</label>
                <div style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
                  <button class="toggle-option" data-year="2025">2025</button>
                  <button class="toggle-option active" data-year="both">Beide</button>
                  <button class="toggle-option" data-year="2026">2026</button>
                </div>
              </div>
              <div>
                <label style="display: block; margin-bottom: 0.5rem; font-weight: 600;">Fahrzeugklasse</label>
                <select id="toggleVehicleSelect" class="vehicle-dropdown">
                  <option value="M1">PKW (Klasse M1)</option>
                  <option value="M3">Busse (Klasse M3)</option>
                  <option value="N1">Leichtes Nutzfahrzeug (Klasse N1)</option>
                  <option value="N2">Schweres Nutzfahrzeug (Klasse N2)</option>
                  <option value="N3">Schweres Nutzfahrzeug (Klasse N3)</option>
                </select>
              </div>
            </div>
          </div>

          <div style="background: white; border: 2px solid #e2e8f0; border-radius: 16px; padding: 2rem; transition: all 0.3s ease; margin: 2rem;">
            <div style="text-align: center; margin-bottom: 2rem;">
              <h2 id="togglePlanName" style="font-size: 2rem; font-weight: 700; margin-bottom: 0.5rem;">Express</h2>
              <p id="togglePlanDescription" style="color: #64748b;">Die richtige Wahl für alle die es schnell wollen</p>
            </div>

            <div style="background: linear-gradient(135deg, #2C75FF, #00D4AA); border-radius: 16px; padding: 1.5rem; text-align: center; color: white; margin: 1.5rem 0; position: relative; overflow: hidden;">
              <div style="font-size: 2.5rem; font-weight: 700; line-height: 1; margin-bottom: 0.5rem;" id="togglePriceAmount">€195</div>
              <div style="font-size: 0.875rem; opacity: 0.9; margin-bottom: 1rem;" id="togglePricePeriod">Gesamtsumme 2025 & 2026</div>
              <div style="background: rgba(255, 255, 255, 0.2); border-radius: 20px; padding: 0.5rem 1rem; font-size: 0.75rem; font-weight: 600; display: none;" id="toggleViewBonus" class="total-sum-bonus">+ 30€ Verivox-Bonus</div>
            </div>

            <ul id="toggleFeatureList" style="list-style: none; padding: 0; margin: 1.5rem 0;">
              <li style="display: flex; align-items: center; gap: 0.75rem; padding: 0.5rem 0; color: #475569;">
                <div style="width: 20px; height: 20px; background: #2C75FF; border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
                  <svg style="width: 12px; height: 12px;" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                  </svg>
                </div>
                <span>Bis zu 110€ pro Jahr</span>
              </li>
              <li style="display: flex; align-items: center; gap: 0.75rem; padding: 0.5rem 0; color: #475569;">
                <div style="width: 20px; height: 20px; background: #2C75FF; border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
                  <svg style="width: 12px; height: 12px;" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                  </svg>
                </div>
                <span>Sofortige Auszahlung</span>
              </li>
              <li style="display: flex; align-items: center; gap: 0.75rem; padding: 0.5rem 0; color: #475569;">
                <div style="width: 20px; height: 20px; background: #2C75FF; border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
                  <svg style="width: 12px; height: 12px;" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                  </svg>
                </div>
                <span>Keine Wartezeit</span>
              </li>
              <li style="display: flex; align-items: center; gap: 0.75rem; padding: 0.5rem 0; color: #475569;">
                <div style="width: 20px; height: 20px; background: #2C75FF; border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
                  <svg style="width: 12px; height: 12px;" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                  </svg>
                </div>
                <span>Garantierte Zahlung</span>
              </li>
            </ul>

            <button style="background: #2C75FF; color: white; border: none; padding: 1rem 2rem; border-radius: 12px; font-weight: 600; font-size: 1rem; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; justify-content: center; gap: 0.5rem; width: 100%;" onclick="selectPlan('Toggle View')">
              <span id="toggleCtaText">Express jetzt beantragen</span>
              <svg style="width: 20px; height: 20px;" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z" clip-rule="evenodd"/>
              </svg>
            </button>
          </div>
        </div>
      </section>

      <!-- Plan Finder View -->
      <section
        id="planfinder"
        class="view"
        role="tabpanel"
      >
        <div style="padding: 2rem;">
          <div style="text-align: center; margin-bottom: 2rem;">
            <div style="font-size: 1.5rem; font-weight: 700; color: #2C75FF; margin-bottom: 1rem;">carbonify</div>
            <h1 style="font-size: 2rem; font-weight: 700; margin-bottom: 0.5rem;">Was ist Ihnen wichtiger?</h1>
            <p style="color: #64748b; font-size: 1.125rem;">Wir finden den perfekten THG-Plan für Sie</p>
          </div>

          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin: 2rem 0;">
            <div class="priority-option" data-priority="speed">
              <div style="font-size: 3rem; margin-bottom: 1rem;">⚡</div>
              <h3 style="font-size: 1.25rem; font-weight: 600; margin-bottom: 0.5rem;">Schnelle Auszahlung</h3>
              <p style="color: #64748b;">Express-Prämie: Auszahlung innerhalb einer Woche</p>
            </div>
            <div class="priority-option" data-priority="amount">
              <div style="font-size: 3rem; margin-bottom: 1rem;">💰</div>
              <h3 style="font-size: 1.25rem; font-weight: 600; margin-bottom: 0.5rem;">Maximale Prämie</h3>
              <p style="color: #64748b;">Klassik-Prämie: Höhere Auszahlung nach UBA-Zertifizierung</p>
            </div>
          </div>

          <div style="text-align: center; margin: 2rem 0;">
            <div style="margin-bottom: 1rem;">
              <label style="display: block; margin-bottom: 0.5rem; font-weight: 600;">Zeitraum:</label>
              <div class="year-chips">
                <span class="year-chip" data-year="2025">Nur 2025</span>
                <span class="year-chip selected" data-year="both">2025 & 2026</span>
                <span class="year-chip" data-year="2026">Nur 2026</span>
              </div>
            </div>
            
            <div style="margin-bottom: 2rem;">
              <label style="display: block; margin-bottom: 0.5rem; font-weight: 600;">Fahrzeugklasse:</label>
              <select id="planfinderVehicleSelect" class="vehicle-dropdown" style="margin: 0 auto;">
                <option value="M1">PKW (Klasse M1)</option>
                <option value="M3">Busse (Klasse M3)</option>
                <option value="N1">Leichtes Nutzfahrzeug (Klasse N1)</option>
                <option value="N2">Schweres Nutzfahrzeug (Klasse N2)</option>
                <option value="N3">Schweres Nutzfahrzeug (Klasse N3)</option>
              </select>
            </div>

            <button style="background: #2C75FF; color: white; border: none; padding: 1rem 2rem; border-radius: 12px; font-weight: 600; font-size: 1rem; cursor: pointer; transition: all 0.3s ease; max-width: 300px; margin: 0 auto;" onclick="showPlanFinderRecommendation()">
              THG-Empfehlungen anzeigen
              <svg style="width: 20px; height: 20px;" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z" clip-rule="evenodd"/>
              </svg>
            </button>
          </div>

          <!-- Recommendation Results -->
          <div id="planfinderResults" style="display: none;">
            <div style="text-align: center; margin: 2rem 0;">
              <h2 style="font-size: 1.5rem; font-weight: 700; margin-bottom: 0.5rem;">Ihre THG-Empfehlungen</h2>
              <p id="planfinderSubtitle" style="color: #64748b;">Basierend auf Ihren Präferenzen</p>
            </div>

            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.5rem;">
              <div style="background: white; border: 2px solid #e2e8f0; border-radius: 16px; padding: 2rem; transition: all 0.3s ease; margin: 2rem;">
                <div style="text-align: center; margin-bottom: 1.5rem;">
                  <div style="background: #2C75FF; color: white; padding: 0.25rem 0.75rem; border-radius: 12px; font-size: 0.75rem; font-weight: 600; display: inline-block; margin-bottom: 1rem;">EMPFOHLEN</div>
                  <h3 id="planfinderPlan1Name" style="font-size: 1.5rem; font-weight: 700; margin-bottom: 0.5rem;">Klassik</h3>
                  <p id="planfinderPlan1Description" style="color: #64748b;">Etwas Wartezeit, höchste THG-Prämie</p>
                </div>

                <div style="background: linear-gradient(135deg, #2C75FF, #00D4AA); border-radius: 16px; padding: 1.5rem; text-align: center; color: white; margin: 1.5rem 0; position: relative; overflow: hidden;">
                  <div style="font-size: 2.5rem; font-weight: 700; line-height: 1; margin-bottom: 0.5rem;" id="planfinderPlan1Price">€215</div>
                  <div style="font-size: 0.875rem; opacity: 0.9; margin-bottom: 1rem;" id="planfinderPlan1Period">Gesamtsumme 2025 & 2026</div>
                  <div style="background: rgba(255, 255, 255, 0.2); border-radius: 20px; padding: 0.5rem 1rem; font-size: 0.75rem; font-weight: 600; display: none;" id="planfinderPlan1Bonus" class="total-sum-bonus">+ 30€ Verivox-Bonus</div>
                </div>

                <button style="background: #2C75FF; color: white; border: none; padding: 1rem 2rem; border-radius: 12px; font-weight: 600; font-size: 1rem; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; justify-content: center; gap: 0.5rem; width: 100%;" onclick="selectPlan('Plan Finder - Klassik')">
                  Jetzt beantragen
                  <svg style="width: 20px; height: 20px;" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z" clip-rule="evenodd"/>
                  </svg>
                </button>
              </div>

              <div style="background: white; border: 2px solid #e2e8f0; border-radius: 16px; padding: 2rem; transition: all 0.3s ease; margin: 2rem;">
                <div style="text-align: center; margin-bottom: 1.5rem;">
                  <h3 id="planfinderPlan2Name" style="font-size: 1.5rem; font-weight: 700; margin-bottom: 0.5rem;">Express</h3>
                  <p id="planfinderPlan2Description" style="color: #64748b;">Die richtige Wahl für alle die es schnell wollen</p>
                </div>

                <div style="background: linear-gradient(135deg, #2C75FF, #00D4AA); border-radius: 16px; padding: 1.5rem; text-align: center; color: white; margin: 1.5rem 0; position: relative; overflow: hidden;">
                  <div style="font-size: 2.5rem; font-weight: 700; line-height: 1; margin-bottom: 0.5rem;" id="planfinderPlan2Price">€195</div>
                  <div style="font-size: 0.875rem; opacity: 0.9; margin-bottom: 1rem;" id="planfinderPlan2Period">Gesamtsumme 2025 & 2026</div>
                  <div style="background: rgba(255, 255, 255, 0.2); border-radius: 20px; padding: 0.5rem 1rem; font-size: 0.75rem; font-weight: 600; display: none;" id="planfinderPlan2Bonus" class="total-sum-bonus">+ 30€ Verivox-Bonus</div>
                </div>

                <button style="background: #2C75FF; color: white; border: none; padding: 1rem 2rem; border-radius: 12px; font-weight: 600; font-size: 1rem; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; justify-content: center; gap: 0.5rem; width: 100%;" onclick="selectPlan('Plan Finder - Express')">
                  Jetzt beantragen
                  <svg style="width: 20px; height: 20px;" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z" clip-rule="evenodd"/>
                  </svg>
                </button>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Figma Design View -->
      <section
        id="figma"
        class="view"
        role="tabpanel"
      >
        <div style="padding: 2rem;">
          <div style="background: #f8fafc; padding: 2rem; border-bottom: 1px solid #e2e8f0; margin-bottom: 2rem;">
            <div style="display: flex; gap: 2rem; align-items: center; flex-wrap: wrap; justify-content: center;">
              <div>
                <label style="display: block; margin-bottom: 0.5rem; font-weight: 600;">Fahrzeugklasse</label>
                <select id="figmaVehicleSelect" class="vehicle-dropdown">
                  <option value="M1">PKW (Klasse M1)</option>
                  <option value="M3">Busse (Klasse M3)</option>
                  <option value="N1">Leichtes Nutzfahrzeug (Klasse N1)</option>
                  <option value="N2">Schweres Nutzfahrzeug (Klasse N2)</option>
                  <option value="N3">Schweres Nutzfahrzeug (Klasse N3)</option>
                </select>
              </div>
              
              <div>
                <label style="display: block; margin-bottom: 0.5rem; font-weight: 600;">Zeitraum</label>
                <div style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
                  <button class="toggle-option" data-year="2025">2025</button>
                  <button class="toggle-option active" data-year="both">Beide</button>
                  <button class="toggle-option" data-year="2026">2026</button>
                </div>
              </div>
            </div>
          </div>

          <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 2rem;">
            <div style="background: white; border: 2px solid #e2e8f0; border-radius: 16px; padding: 2rem; transition: all 0.3s ease; margin: 2rem;">
              <div style="text-align: center; margin-bottom: 1.5rem;">
                <h3 style="font-size: 1.5rem; font-weight: 700; margin-bottom: 0.5rem;">Klassik</h3>
                <p style="color: #64748b;">Etwas Wartezeit, höchste THG-Prämie</p>
              </div>

              <div style="background: linear-gradient(135deg, #2C75FF, #00D4AA); border-radius: 16px; padding: 1.5rem; text-align: center; color: white; margin: 1.5rem 0; position: relative; overflow: hidden;">
                <div style="font-size: 2.5rem; font-weight: 700; line-height: 1; margin-bottom: 0.5rem;" id="figmaKlassikPrice">€215</div>
                <div style="font-size: 0.875rem; opacity: 0.9; margin-bottom: 1rem;" id="figmaKlassikPeriod">Gesamtsumme 2025 & 2026</div>
                <div style="background: rgba(255, 255, 255, 0.2); border-radius: 20px; padding: 0.5rem 1rem; font-size: 0.75rem; font-weight: 600; display: none;" id="figmaKlassikBonus" class="total-sum-bonus">+ 30€ Verivox-Bonus</div>
              </div>

              <ul style="list-style: none; padding: 0; margin: 1.5rem 0;">
                <li style="display: flex; align-items: center; gap: 0.75rem; padding: 0.5rem 0; color: #475569;">
                  <div style="width: 20px; height: 20px; background: #2C75FF; border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">✓</div>
                  <span>Bis zu 130€ pro Jahr</span>
                </li>
                <li style="display: flex; align-items: center; gap: 0.75rem; padding: 0.5rem 0; color: #475569;">
                  <div style="width: 20px; height: 20px; background: #2C75FF; border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">✓</div>
                  <span>UBA-geprüft und zertifiziert</span>
                </li>
                <li style="display: flex; align-items: center; gap: 0.75rem; padding: 0.5rem 0; color: #475569;">
                  <div style="width: 20px; height: 20px; background: #2C75FF; border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">✓</div>
                  <span>Volle THG-Quote-Ausschöpfung</span>
                </li>
              </ul>

              <button style="background: #2C75FF; color: white; border: none; padding: 1rem 2rem; border-radius: 12px; font-weight: 600; font-size: 1rem; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; justify-content: center; gap: 0.5rem; width: 100%;" onclick="selectPlan('Figma - Klassik')">
                Klassik jetzt beantragen
              </button>
            </div>

            <div style="background: white; border: 2px solid #e2e8f0; border-radius: 16px; padding: 2rem; transition: all 0.3s ease; margin: 2rem;">
              <div style="text-align: center; margin-bottom: 1.5rem;">
                <h3 style="font-size: 1.5rem; font-weight: 700; margin-bottom: 0.5rem;">Express</h3>
                <p style="color: #64748b;">Die richtige Wahl für alle die es schnell wollen</p>
              </div>

              <div style="background: linear-gradient(135deg, #2C75FF, #00D4AA); border-radius: 16px; padding: 1.5rem; text-align: center; color: white; margin: 1.5rem 0; position: relative; overflow: hidden;">
                <div style="font-size: 2.5rem; font-weight: 700; line-height: 1; margin-bottom: 0.5rem;" id="figmaExpressPrice">€195</div>
                <div style="font-size: 0.875rem; opacity: 0.9; margin-bottom: 1rem;" id="figmaExpressPeriod">Gesamtsumme 2025 & 2026</div>
                <div style="background: rgba(255, 255, 255, 0.2); border-radius: 20px; padding: 0.5rem 1rem; font-size: 0.75rem; font-weight: 600; display: none;" id="figmaExpressBonus" class="total-sum-bonus">+ 30€ Verivox-Bonus</div>
              </div>

              <ul style="list-style: none; padding: 0; margin: 1.5rem 0;">
                <li style="display: flex; align-items: center; gap: 0.75rem; padding: 0.5rem 0; color: #475569;">
                  <div style="width: 20px; height: 20px; background: #2C75FF; border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">✓</div>
                  <span>Bis zu 110€ pro Jahr</span>
                </li>
                <li style="display: flex; align-items: center; gap: 0.75rem; padding: 0.5rem 0; color: #475569;">
                  <div style="width: 20px; height: 20px; background: #2C75FF; border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">✓</div>
                  <span>Sofortige Auszahlung</span>
                </li>
                <li style="display: flex; align-items: center; gap: 0.75rem; padding: 0.5rem 0; color: #475569;">
                  <div style="width: 20px; height: 20px; background: #2C75FF; border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">✓</div>
                  <span>Keine Wartezeit</span>
                </li>
              </ul>

              <button style="background: #2C75FF; color: white; border: none; padding: 1rem 2rem; border-radius: 12px; font-weight: 600; font-size: 1rem; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; justify-content: center; gap: 0.5rem; width: 100%;" onclick="selectPlan('Figma - Express')">
                Express jetzt beantragen
              </button>
            </div>
          </div>
        </div>
      </section>

      <!-- Figma Copy View -->
      <section
        id="figma-copy"
        class="view"
        role="tabpanel"
      >
        <div style="padding: 2rem; text-align: center;">
          <h2 style="font-size: 2rem; font-weight: 700; margin-bottom: 1rem;">Figma Copy View</h2>
          <p style="color: #64748b; font-size: 1.125rem;">Diese Ansicht ist eine Kopie der Figma-Design-Ansicht</p>
          <div style="margin-top: 2rem;">
            <button style="background: #2C75FF; color: white; border: none; padding: 1rem 2rem; border-radius: 12px; font-weight: 600; font-size: 1rem; cursor: pointer; transition: all 0.3s ease;" onclick="selectPlan('Figma Copy')">
              Demo Button
            </button>
          </div>
        </div>
      </section>
    </main>

    <script>
      // Sample data for all pricing calculations
      const SAMPLE_DATA = {
        plans: {
          klassik: {
            name: 'Klassik',
            description: 'Etwas Wartezeit, höchste THG-Prämie',
            features: [
              'Bis zu 130€ pro Jahr',
              'UBA-geprüft und zertifiziert',
              'Volle THG-Quote-Ausschöpfung',
              'Kostenlose Registrierung'
            ]
          },
          express: {
            name: 'Express',
            description: 'Die richtige Wahl für alle die es schnell wollen',
            features: [
              'Bis zu 110€ pro Jahr',
              'Sofortige Auszahlung',
              'Keine Wartezeit',
              'Garantierte Zahlung'
            ]
          }
        },
        prices: {
          klassik: {
            '2025': { M1: 105, M3: 280, N1: 130, N2: 160, N3: 190 },
            '2026': { M1: 110, M3: 295, N1: 135, N2: 170, N3: 200 }
          },
          express: {
            '2025': { M1: 95, M3: 250, N1: 120, N2: 145, N3: 170 },
            '2026': { M1: 100, M3: 265, N1: 125, N2: 155, N3: 180 }
          }
        }
      };

      // Global state
      let bonusEnabled = false;
      let mobileViewEnabled = false;
      let currentYear = 'both';
      let currentVehicleClass = 'M1';
      let currentPlan = 'express';
      let planfinderPriority = null;
      let planfinderYear = 'both';
      let planfinderVehicleClass = 'M1';

      // Utility functions
      function getPrice(plan, year, vehicleClass) {
        return SAMPLE_DATA.prices[plan][year][vehicleClass] || 0;
      }

      function getTotalSum(plan, vehicleClass) {
        const price2025 = getPrice(plan, '2025', vehicleClass);
        const price2026 = getPrice(plan, '2026', vehicleClass);
        return price2025 + price2026;
      }

      // Toggle functionality
      function toggleBonus() {
        bonusEnabled = !bonusEnabled;
        const toggle = document.getElementById('bonusToggle');
        toggle.classList.toggle('active', bonusEnabled);
        
        // Show/hide all bonus elements
        const bonusElements = document.querySelectorAll('.total-sum-bonus');
        bonusElements.forEach(element => {
          element.style.display = bonusEnabled ? 'inline-block' : 'none';
        });
      }

      function toggleMobileView() {
        mobileViewEnabled = !mobileViewEnabled;
        const toggle = document.getElementById('mobileToggle');
        toggle.classList.toggle('active', mobileViewEnabled);
        
        // Apply mobile styles
        document.body.classList.toggle('mobile-view', mobileViewEnabled);
      }

      // Tab switching
      function showView(targetId) {
        // Hide all views
        document.querySelectorAll('.view').forEach(view => {
          view.classList.remove('active');
        });
        
        // Remove active from all tabs
        document.querySelectorAll('.tab-btn').forEach(btn => {
          btn.classList.remove('active');
        });
        
        // Show target view
        document.querySelector(targetId).classList.add('active');
        
        // Add active to clicked tab
        document.querySelector(`[data-target="${targetId}"]`).classList.add('active');
      }

      // Update pricing displays
      function updateComparisonView() {
        const klassikPrice = currentYear === 'both' ? 
          getTotalSum('klassik', currentVehicleClass) : 
          getPrice('klassik', currentYear, currentVehicleClass);
        
        const expressPrice = currentYear === 'both' ? 
          getTotalSum('express', currentVehicleClass) : 
          getPrice('express', currentYear, currentVehicleClass);
        
        const periodText = currentYear === 'both' ? 
          'Gesamtsumme 2025 & 2026' : 
          `Jahr ${currentYear}`;

        document.getElementById('klassikComparisonPrice').textContent = `€${klassikPrice}`;
        document.getElementById('expressComparisonPrice').textContent = `€${expressPrice}`;
        document.getElementById('comparisonPeriod').textContent = periodText;
        document.getElementById('comparisonPeriod2').textContent = periodText;
      }

      function updateToggleView() {
        const plan = SAMPLE_DATA.plans[currentPlan];
        const price = currentYear === 'both' ? 
          getTotalSum(currentPlan, currentVehicleClass) : 
          getPrice(currentPlan, currentYear, currentVehicleClass);
        
        const periodText = currentYear === 'both' ? 
          'Gesamtsumme 2025 & 2026' : 
          `Jahr ${currentYear}`;

        document.getElementById('togglePlanName').textContent = plan.name;
        document.getElementById('togglePlanDescription').textContent = plan.description;
        document.getElementById('togglePriceAmount').textContent = `€${price}`;
        document.getElementById('togglePricePeriod').textContent = periodText;
        document.getElementById('toggleCtaText').textContent = `${plan.name} jetzt beantragen`;

        // Update features
        const featuresList = document.getElementById('toggleFeatureList');
        featuresList.innerHTML = '';
        plan.features.forEach(feature => {
          const li = document.createElement('li');
          li.style.cssText = 'display: flex; align-items: center; gap: 0.75rem; padding: 0.5rem 0; color: #475569;';
          li.innerHTML = `
            <div style="width: 20px; height: 20px; background: #2C75FF; border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
              <svg style="width: 12px; height: 12px;" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
              </svg>
            </div>
            <span>${feature}</span>
          `;
          featuresList.appendChild(li);
        });
      }

      function updateFigmaView() {
        const klassikPrice = currentYear === 'both' ? 
          getTotalSum('klassik', currentVehicleClass) : 
          getPrice('klassik', currentYear, currentVehicleClass);
        
        const expressPrice = currentYear === 'both' ? 
          getTotalSum('express', currentVehicleClass) : 
          getPrice('express', currentYear, currentVehicleClass);
        
        const periodText = currentYear === 'both' ? 
          'Gesamtsumme 2025 & 2026' : 
          `Jahr ${currentYear}`;

        document.getElementById('figmaKlassikPrice').textContent = `€${klassikPrice}`;
        document.getElementById('figmaExpressPrice').textContent = `€${expressPrice}`;
        document.getElementById('figmaKlassikPeriod').textContent = periodText;
        document.getElementById('figmaExpressPeriod').textContent = periodText;
      }

      function updatePlanFinderView() {
        const klassikPrice = planfinderYear === 'both' ? 
          getTotalSum('klassik', planfinderVehicleClass) : 
          getPrice('klassik', planfinderYear, planfinderVehicleClass);
        
        const expressPrice = planfinderYear === 'both' ? 
          getTotalSum('express', planfinderVehicleClass) : 
          getPrice('express', planfinderYear, planfinderVehicleClass);
        
        const periodText = planfinderYear === 'both' ? 
          'Gesamtsumme 2025 & 2026' : 
          planfinderYear === '2025' ? 'für 2025' : 'für 2026';

        document.getElementById('planfinderPlan1Price').textContent = `€${klassikPrice}`;
        document.getElementById('planfinderPlan2Price').textContent = `€${expressPrice}`;
        document.getElementById('planfinderPlan1Period').textContent = periodText;
        document.getElementById('planfinderPlan2Period').textContent = periodText;
      }

      // Plan Finder functions
      function showPlanFinderRecommendation() {
        let subtitle = 'Basierend auf Ihren Präferenzen';
        
        if (planfinderPriority === 'speed') {
          subtitle = 'Optimiert für schnelle Auszahlung';
        } else if (planfinderPriority === 'amount') {
          subtitle = 'Optimiert für maximale Prämie';
        }
        
        document.getElementById('planfinderSubtitle').textContent = subtitle;
        document.getElementById('planfinderResults').style.display = 'block';
        updatePlanFinderView();
      }

      function selectPlan(planName) {
        alert(`Sie haben ${planName} bei carbonify ausgewählt!\n\nWeiterleitung zur THG-Anmeldung...`);
      }

      // Event listeners
      document.addEventListener('DOMContentLoaded', function() {
        // Bonus toggle
        document.getElementById('bonusToggle').addEventListener('click', toggleBonus);
        
        // Mobile toggle
        document.getElementById('mobileToggle').addEventListener('click', toggleMobileView);
        
        // Tab navigation
        document.querySelectorAll('.tab-btn').forEach(btn => {
          btn.addEventListener('click', function() {
            showView(this.dataset.target);
          });
        });

        // Comparison view controls
        document.querySelectorAll('#comparison .toggle-option').forEach(btn => {
          btn.addEventListener('click', function() {
            if (this.dataset.year) {
              document.querySelectorAll('#comparison .toggle-option[data-year]').forEach(b => b.classList.remove('active'));
              this.classList.add('active');
              currentYear = this.dataset.year;
              updateComparisonView();
            }
          });
        });

        document.getElementById('comparisonVehicleSelect').addEventListener('change', function() {
          currentVehicleClass = this.value;
          updateComparisonView();
        });

        // Toggle view controls
        document.querySelectorAll('#toggle .toggle-option').forEach(btn => {
          btn.addEventListener('click', function() {
            if (this.dataset.plan) {
              document.querySelectorAll('#toggle .toggle-option[data-plan]').forEach(b => b.classList.remove('active'));
              this.classList.add('active');
              currentPlan = this.dataset.plan;
              updateToggleView();
            } else if (this.dataset.year) {
              document.querySelectorAll('#toggle .toggle-option[data-year]').forEach(b => b.classList.remove('active'));
              this.classList.add('active');
              currentYear = this.dataset.year;
              updateToggleView();
            }
          });
        });

        document.getElementById('toggleVehicleSelect').addEventListener('change', function() {
          currentVehicleClass = this.value;
          updateToggleView();
        });

        // Plan Finder controls
        document.querySelectorAll('.priority-option').forEach(option => {
          option.addEventListener('click', function() {
            document.querySelectorAll('.priority-option').forEach(o => o.classList.remove('selected'));
            this.classList.add('selected');
            planfinderPriority = this.dataset.priority;
          });
        });

        document.querySelectorAll('.year-chip').forEach(chip => {
          chip.addEventListener('click', function() {
            document.querySelectorAll('.year-chip').forEach(c => c.classList.remove('selected'));
            this.classList.add('selected');
            planfinderYear = this.dataset.year;
          });
        });

        document.getElementById('planfinderVehicleSelect').addEventListener('change', function() {
          planfinderVehicleClass = this.value;
        });

        // Figma view controls
        document.querySelectorAll('#figma .toggle-option').forEach(btn => {
          btn.addEventListener('click', function() {
            document.querySelectorAll('#figma .toggle-option').forEach(b => b.classList.remove('active'));
            this.classList.add('active');
            currentYear = this.dataset.year;
            updateFigmaView();
          });
        });

        document.getElementById('figmaVehicleSelect').addEventListener('change', function() {
          currentVehicleClass = this.value;
          updateFigmaView();
        });

        // Hero interactions
        setupHeroInteractions();

        // Initial updates
        updateComparisonView();
        updateToggleView();
        updateFigmaView();
      });

      function setupHeroInteractions() {
        // Add click handlers to floating cards
        document.querySelectorAll('.floating-card').forEach((card) => {
          card.addEventListener('click', function () {
            this.style.transform = 'scale(1.1) rotate(5deg)';
            setTimeout(() => {
              this.style.transform = '';
            }, 300);
          });
        });

        // Smooth scroll to views section
        document.querySelector('.hero-cta').addEventListener('click', function (e) {
          e.preventDefault();
          document.getElementById('views').scrollIntoView({
            behavior: 'smooth',
          });
        });
      }

      // Dynamic pricing update for hero section
      function updateMaxPriceDisplay() {
        try {
          // Get all available years and plans to find the highest price for M1 vehicle
          const years = ['2025', '2026', 'both'];
          const plans = ['klassik', 'express'];
          let maxPrice = 0;
          let maxPriceYear = '';
          let maxPricePlan = '';

          years.forEach(year => {
            plans.forEach(plan => {
              let price;
              if (year === 'both') {
                price = getTotalSum(plan, 'M1');
              } else {
                price = getPrice(plan, year, 'M1');
              }
              
              if (price > maxPrice) {
                maxPrice = price;
                maxPriceYear = year;
                maxPricePlan = plan;
              }
            });
          });

          // Update the floating card display
          const maxPriceElement = document.getElementById('maxPriceDisplay');
          if (maxPriceElement) {
            maxPriceElement.textContent = `Bis zu €${maxPrice}`;
          }

          // Update the hero stat
          const maxPriceStat = document.getElementById('maxPriceStat');
          if (maxPriceStat) {
            maxPriceStat.textContent = `€${maxPrice}`;
          }

          console.log(`Updated max price display: €${maxPrice} (${maxPricePlan} ${maxPriceYear})`);
        } catch (error) {
          console.error('Error updating max price display:', error);
        }
      }

      // Update max price when page loads
      document.addEventListener('DOMContentLoaded', updateMaxPriceDisplay);
    </script>
  </body>
</html>
